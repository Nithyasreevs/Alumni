{"version":3,"sources":["../node_modules/jose/dist/webapi/lib/buffer_utils.js","../node_modules/jose/dist/webapi/lib/base64.js","../node_modules/jose/dist/webapi/util/base64url.js","../node_modules/jose/dist/webapi/util/errors.js","../node_modules/jose/dist/webapi/lib/iv.js","../node_modules/jose/dist/webapi/lib/check_iv_length.js","../node_modules/jose/dist/webapi/lib/check_cek_length.js","../node_modules/jose/dist/webapi/lib/crypto_key.js","../node_modules/jose/dist/webapi/lib/invalid_key_input.js","../node_modules/jose/dist/webapi/lib/is_key_like.js","../node_modules/jose/dist/webapi/lib/decrypt.js","../node_modules/jose/dist/webapi/lib/is_disjoint.js","../node_modules/jose/dist/webapi/lib/is_object.js","../node_modules/jose/dist/webapi/lib/aeskw.js","../node_modules/jose/dist/webapi/lib/digest.js","../node_modules/jose/dist/webapi/lib/ecdhes.js","../node_modules/jose/dist/webapi/lib/pbes2kw.js","../node_modules/jose/dist/webapi/lib/check_key_length.js","../node_modules/jose/dist/webapi/lib/rsaes.js","../node_modules/jose/dist/webapi/lib/cek.js","../node_modules/jose/dist/webapi/lib/jwk_to_key.js","../node_modules/jose/dist/webapi/key/import.js","../node_modules/jose/dist/webapi/lib/aesgcmkw.js","../node_modules/jose/dist/webapi/lib/decrypt_key_management.js","../node_modules/jose/dist/webapi/lib/validate_crit.js","../node_modules/jose/dist/webapi/lib/validate_algorithms.js","../node_modules/jose/dist/webapi/lib/is_jwk.js","../node_modules/jose/dist/webapi/lib/normalize_key.js","../node_modules/jose/dist/webapi/lib/check_key_type.js","../node_modules/jose/dist/webapi/jwe/flattened/decrypt.js","../node_modules/jose/dist/webapi/jwe/compact/decrypt.js","../node_modules/jose/dist/webapi/lib/epoch.js","../node_modules/jose/dist/webapi/lib/secs.js","../node_modules/jose/dist/webapi/lib/jwt_claims_set.js","../node_modules/jose/dist/webapi/jwt/decrypt.js","../index.js"],"names":["message","tag","getCryptoKey","deriveKey","unwrap","bitLength","protectedHeader"],"mappings":"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","file":"index.js","sourcesContent":["export const encoder = new TextEncoder();\nexport const decoder = new TextDecoder();\nconst MAX_INT32 = 2 ** 32;\nexport function concat(...buffers) {\n    const size = buffers.reduce((acc, { length }) => acc + length, 0);\n    const buf = new Uint8Array(size);\n    let i = 0;\n    for (const buffer of buffers) {\n        buf.set(buffer, i);\n        i += buffer.length;\n    }\n    return buf;\n}\nfunction writeUInt32BE(buf, value, offset) {\n    if (value < 0 || value >= MAX_INT32) {\n        throw new RangeError(`value must be >= 0 and <= ${MAX_INT32 - 1}. Received ${value}`);\n    }\n    buf.set([value >>> 24, value >>> 16, value >>> 8, value & 0xff], offset);\n}\nexport function uint64be(value) {\n    const high = Math.floor(value / MAX_INT32);\n    const low = value % MAX_INT32;\n    const buf = new Uint8Array(8);\n    writeUInt32BE(buf, high, 0);\n    writeUInt32BE(buf, low, 4);\n    return buf;\n}\nexport function uint32be(value) {\n    const buf = new Uint8Array(4);\n    writeUInt32BE(buf, value);\n    return buf;\n}\n","export function encodeBase64(input) {\n    if (Uint8Array.prototype.toBase64) {\n        return input.toBase64();\n    }\n    const CHUNK_SIZE = 0x8000;\n    const arr = [];\n    for (let i = 0; i < input.length; i += CHUNK_SIZE) {\n        arr.push(String.fromCharCode.apply(null, input.subarray(i, i + CHUNK_SIZE)));\n    }\n    return btoa(arr.join(''));\n}\nexport function decodeBase64(encoded) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(encoded);\n    }\n    const binary = atob(encoded);\n    const bytes = new Uint8Array(binary.length);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return bytes;\n}\n","import { encoder, decoder } from '../lib/buffer_utils.js';\nimport { encodeBase64, decodeBase64 } from '../lib/base64.js';\nexport function decode(input) {\n    if (Uint8Array.fromBase64) {\n        return Uint8Array.fromBase64(typeof input === 'string' ? input : decoder.decode(input), {\n            alphabet: 'base64url',\n        });\n    }\n    let encoded = input;\n    if (encoded instanceof Uint8Array) {\n        encoded = decoder.decode(encoded);\n    }\n    encoded = encoded.replace(/-/g, '+').replace(/_/g, '/').replace(/\\s/g, '');\n    try {\n        return decodeBase64(encoded);\n    }\n    catch {\n        throw new TypeError('The input to be decoded is not correctly encoded.');\n    }\n}\nexport function encode(input) {\n    let unencoded = input;\n    if (typeof unencoded === 'string') {\n        unencoded = encoder.encode(unencoded);\n    }\n    if (Uint8Array.prototype.toBase64) {\n        return unencoded.toBase64({ alphabet: 'base64url', omitPadding: true });\n    }\n    return encodeBase64(unencoded).replace(/=/g, '').replace(/\\+/g, '-').replace(/\\//g, '_');\n}\n","export class JOSEError extends Error {\n    static code = 'ERR_JOSE_GENERIC';\n    code = 'ERR_JOSE_GENERIC';\n    constructor(message, options) {\n        super(message, options);\n        this.name = this.constructor.name;\n        Error.captureStackTrace?.(this, this.constructor);\n    }\n}\nexport class JWTClaimValidationFailed extends JOSEError {\n    static code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    code = 'ERR_JWT_CLAIM_VALIDATION_FAILED';\n    claim;\n    reason;\n    payload;\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nexport class JWTExpired extends JOSEError {\n    static code = 'ERR_JWT_EXPIRED';\n    code = 'ERR_JWT_EXPIRED';\n    claim;\n    reason;\n    payload;\n    constructor(message, payload, claim = 'unspecified', reason = 'unspecified') {\n        super(message, { cause: { claim, reason, payload } });\n        this.claim = claim;\n        this.reason = reason;\n        this.payload = payload;\n    }\n}\nexport class JOSEAlgNotAllowed extends JOSEError {\n    static code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n    code = 'ERR_JOSE_ALG_NOT_ALLOWED';\n}\nexport class JOSENotSupported extends JOSEError {\n    static code = 'ERR_JOSE_NOT_SUPPORTED';\n    code = 'ERR_JOSE_NOT_SUPPORTED';\n}\nexport class JWEDecryptionFailed extends JOSEError {\n    static code = 'ERR_JWE_DECRYPTION_FAILED';\n    code = 'ERR_JWE_DECRYPTION_FAILED';\n    constructor(message = 'decryption operation failed', options) {\n        super(message, options);\n    }\n}\nexport class JWEInvalid extends JOSEError {\n    static code = 'ERR_JWE_INVALID';\n    code = 'ERR_JWE_INVALID';\n}\nexport class JWSInvalid extends JOSEError {\n    static code = 'ERR_JWS_INVALID';\n    code = 'ERR_JWS_INVALID';\n}\nexport class JWTInvalid extends JOSEError {\n    static code = 'ERR_JWT_INVALID';\n    code = 'ERR_JWT_INVALID';\n}\nexport class JWKInvalid extends JOSEError {\n    static code = 'ERR_JWK_INVALID';\n    code = 'ERR_JWK_INVALID';\n}\nexport class JWKSInvalid extends JOSEError {\n    static code = 'ERR_JWKS_INVALID';\n    code = 'ERR_JWKS_INVALID';\n}\nexport class JWKSNoMatchingKey extends JOSEError {\n    static code = 'ERR_JWKS_NO_MATCHING_KEY';\n    code = 'ERR_JWKS_NO_MATCHING_KEY';\n    constructor(message = 'no applicable key found in the JSON Web Key Set', options) {\n        super(message, options);\n    }\n}\nexport class JWKSMultipleMatchingKeys extends JOSEError {\n    [Symbol.asyncIterator];\n    static code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    code = 'ERR_JWKS_MULTIPLE_MATCHING_KEYS';\n    constructor(message = 'multiple matching keys found in the JSON Web Key Set', options) {\n        super(message, options);\n    }\n}\nexport class JWKSTimeout extends JOSEError {\n    static code = 'ERR_JWKS_TIMEOUT';\n    code = 'ERR_JWKS_TIMEOUT';\n    constructor(message = 'request timed out', options) {\n        super(message, options);\n    }\n}\nexport class JWSSignatureVerificationFailed extends JOSEError {\n    static code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    code = 'ERR_JWS_SIGNATURE_VERIFICATION_FAILED';\n    constructor(message = 'signature verification failed', options) {\n        super(message, options);\n    }\n}\n","import { JOSENotSupported } from '../util/errors.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A128GCMKW':\n        case 'A192GCM':\n        case 'A192GCMKW':\n        case 'A256GCM':\n        case 'A256GCMKW':\n            return 96;\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            return 128;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => crypto.getRandomValues(new Uint8Array(bitLength(alg) >> 3));\n","import { JWEInvalid } from '../util/errors.js';\nimport { bitLength } from './iv.js';\nexport default (enc, iv) => {\n    if (iv.length << 3 !== bitLength(enc)) {\n        throw new JWEInvalid('Invalid Initialization Vector length');\n    }\n};\n","import { JWEInvalid } from '../util/errors.js';\nexport default (cek, expected) => {\n    const actual = cek.byteLength << 3;\n    if (actual !== expected) {\n        throw new JWEInvalid(`Invalid Content Encryption Key length. Expected ${expected} bits, got ${actual} bits`);\n    }\n};\n","function unusable(name, prop = 'algorithm.name') {\n    return new TypeError(`CryptoKey does not support this operation, its ${prop} must be ${name}`);\n}\nfunction isAlgorithm(algorithm, name) {\n    return algorithm.name === name;\n}\nfunction getHashLength(hash) {\n    return parseInt(hash.name.slice(4), 10);\n}\nfunction getNamedCurve(alg) {\n    switch (alg) {\n        case 'ES256':\n            return 'P-256';\n        case 'ES384':\n            return 'P-384';\n        case 'ES512':\n            return 'P-521';\n        default:\n            throw new Error('unreachable');\n    }\n}\nfunction checkUsage(key, usage) {\n    if (usage && !key.usages.includes(usage)) {\n        throw new TypeError(`CryptoKey does not support this operation, its usages must include ${usage}.`);\n    }\n}\nexport function checkSigCryptoKey(key, alg, usage) {\n    switch (alg) {\n        case 'HS256':\n        case 'HS384':\n        case 'HS512': {\n            if (!isAlgorithm(key.algorithm, 'HMAC'))\n                throw unusable('HMAC');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'RS256':\n        case 'RS384':\n        case 'RS512': {\n            if (!isAlgorithm(key.algorithm, 'RSASSA-PKCS1-v1_5'))\n                throw unusable('RSASSA-PKCS1-v1_5');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'PS256':\n        case 'PS384':\n        case 'PS512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-PSS'))\n                throw unusable('RSA-PSS');\n            const expected = parseInt(alg.slice(2), 10);\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        case 'Ed25519':\n        case 'EdDSA': {\n            if (!isAlgorithm(key.algorithm, 'Ed25519'))\n                throw unusable('Ed25519');\n            break;\n        }\n        case 'ES256':\n        case 'ES384':\n        case 'ES512': {\n            if (!isAlgorithm(key.algorithm, 'ECDSA'))\n                throw unusable('ECDSA');\n            const expected = getNamedCurve(alg);\n            const actual = key.algorithm.namedCurve;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.namedCurve');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usage);\n}\nexport function checkEncCryptoKey(key, alg, usage) {\n    switch (alg) {\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM': {\n            if (!isAlgorithm(key.algorithm, 'AES-GCM'))\n                throw unusable('AES-GCM');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (!isAlgorithm(key.algorithm, 'AES-KW'))\n                throw unusable('AES-KW');\n            const expected = parseInt(alg.slice(1, 4), 10);\n            const actual = key.algorithm.length;\n            if (actual !== expected)\n                throw unusable(expected, 'algorithm.length');\n            break;\n        }\n        case 'ECDH': {\n            switch (key.algorithm.name) {\n                case 'ECDH':\n                case 'X25519':\n                    break;\n                default:\n                    throw unusable('ECDH or X25519');\n            }\n            break;\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW':\n            if (!isAlgorithm(key.algorithm, 'PBKDF2'))\n                throw unusable('PBKDF2');\n            break;\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (!isAlgorithm(key.algorithm, 'RSA-OAEP'))\n                throw unusable('RSA-OAEP');\n            const expected = parseInt(alg.slice(9), 10) || 1;\n            const actual = getHashLength(key.algorithm.hash);\n            if (actual !== expected)\n                throw unusable(`SHA-${expected}`, 'algorithm.hash');\n            break;\n        }\n        default:\n            throw new TypeError('CryptoKey does not support this operation');\n    }\n    checkUsage(key, usage);\n}\n","function message(msg, actual, ...types) {\n    types = types.filter(Boolean);\n    if (types.length > 2) {\n        const last = types.pop();\n        msg += `one of type ${types.join(', ')}, or ${last}.`;\n    }\n    else if (types.length === 2) {\n        msg += `one of type ${types[0]} or ${types[1]}.`;\n    }\n    else {\n        msg += `of type ${types[0]}.`;\n    }\n    if (actual == null) {\n        msg += ` Received ${actual}`;\n    }\n    else if (typeof actual === 'function' && actual.name) {\n        msg += ` Received function ${actual.name}`;\n    }\n    else if (typeof actual === 'object' && actual != null) {\n        if (actual.constructor?.name) {\n            msg += ` Received an instance of ${actual.constructor.name}`;\n        }\n    }\n    return msg;\n}\nexport default (actual, ...types) => {\n    return message('Key must be ', actual, ...types);\n};\nexport function withAlg(alg, actual, ...types) {\n    return message(`Key for the ${alg} algorithm must be `, actual, ...types);\n}\n","export function assertCryptoKey(key) {\n    if (!isCryptoKey(key)) {\n        throw new Error('CryptoKey instance expected');\n    }\n}\nexport function isCryptoKey(key) {\n    return key?.[Symbol.toStringTag] === 'CryptoKey';\n}\nexport function isKeyObject(key) {\n    return key?.[Symbol.toStringTag] === 'KeyObject';\n}\nexport default (key) => {\n    return isCryptoKey(key) || isKeyObject(key);\n};\n","import { concat, uint64be } from './buffer_utils.js';\nimport checkIvLength from './check_iv_length.js';\nimport checkCekLength from './check_cek_length.js';\nimport { JOSENotSupported, JWEDecryptionFailed, JWEInvalid } from '../util/errors.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport invalidKeyInput from './invalid_key_input.js';\nimport { isCryptoKey } from './is_key_like.js';\nasync function timingSafeEqual(a, b) {\n    if (!(a instanceof Uint8Array)) {\n        throw new TypeError('First argument must be a buffer');\n    }\n    if (!(b instanceof Uint8Array)) {\n        throw new TypeError('Second argument must be a buffer');\n    }\n    const algorithm = { name: 'HMAC', hash: 'SHA-256' };\n    const key = (await crypto.subtle.generateKey(algorithm, false, ['sign']));\n    const aHmac = new Uint8Array(await crypto.subtle.sign(algorithm, key, a));\n    const bHmac = new Uint8Array(await crypto.subtle.sign(algorithm, key, b));\n    let out = 0;\n    let i = -1;\n    while (++i < 32) {\n        out |= aHmac[i] ^ bHmac[i];\n    }\n    return out === 0;\n}\nasync function cbcDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    if (!(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'Uint8Array'));\n    }\n    const keySize = parseInt(enc.slice(1, 4), 10);\n    const encKey = await crypto.subtle.importKey('raw', cek.subarray(keySize >> 3), 'AES-CBC', false, ['decrypt']);\n    const macKey = await crypto.subtle.importKey('raw', cek.subarray(0, keySize >> 3), {\n        hash: `SHA-${keySize << 1}`,\n        name: 'HMAC',\n    }, false, ['sign']);\n    const macData = concat(aad, iv, ciphertext, uint64be(aad.length << 3));\n    const expectedTag = new Uint8Array((await crypto.subtle.sign('HMAC', macKey, macData)).slice(0, keySize >> 3));\n    let macCheckPassed;\n    try {\n        macCheckPassed = await timingSafeEqual(tag, expectedTag);\n    }\n    catch {\n    }\n    if (!macCheckPassed) {\n        throw new JWEDecryptionFailed();\n    }\n    let plaintext;\n    try {\n        plaintext = new Uint8Array(await crypto.subtle.decrypt({ iv, name: 'AES-CBC' }, encKey, ciphertext));\n    }\n    catch {\n    }\n    if (!plaintext) {\n        throw new JWEDecryptionFailed();\n    }\n    return plaintext;\n}\nasync function gcmDecrypt(enc, cek, ciphertext, iv, tag, aad) {\n    let encKey;\n    if (cek instanceof Uint8Array) {\n        encKey = await crypto.subtle.importKey('raw', cek, 'AES-GCM', false, ['decrypt']);\n    }\n    else {\n        checkEncCryptoKey(cek, enc, 'decrypt');\n        encKey = cek;\n    }\n    try {\n        return new Uint8Array(await crypto.subtle.decrypt({\n            additionalData: aad,\n            iv,\n            name: 'AES-GCM',\n            tagLength: 128,\n        }, encKey, concat(ciphertext, tag)));\n    }\n    catch {\n        throw new JWEDecryptionFailed();\n    }\n}\nexport default async (enc, cek, ciphertext, iv, tag, aad) => {\n    if (!isCryptoKey(cek) && !(cek instanceof Uint8Array)) {\n        throw new TypeError(invalidKeyInput(cek, 'CryptoKey', 'KeyObject', 'Uint8Array', 'JSON Web Key'));\n    }\n    if (!iv) {\n        throw new JWEInvalid('JWE Initialization Vector missing');\n    }\n    if (!tag) {\n        throw new JWEInvalid('JWE Authentication Tag missing');\n    }\n    checkIvLength(enc, iv);\n    switch (enc) {\n        case 'A128CBC-HS256':\n        case 'A192CBC-HS384':\n        case 'A256CBC-HS512':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(-3), 10));\n            return cbcDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        case 'A128GCM':\n        case 'A192GCM':\n        case 'A256GCM':\n            if (cek instanceof Uint8Array)\n                checkCekLength(cek, parseInt(enc.slice(1, 4), 10));\n            return gcmDecrypt(enc, cek, ciphertext, iv, tag, aad);\n        default:\n            throw new JOSENotSupported('Unsupported JWE Content Encryption Algorithm');\n    }\n};\n","export default (...headers) => {\n    const sources = headers.filter(Boolean);\n    if (sources.length === 0 || sources.length === 1) {\n        return true;\n    }\n    let acc;\n    for (const header of sources) {\n        const parameters = Object.keys(header);\n        if (!acc || acc.size === 0) {\n            acc = new Set(parameters);\n            continue;\n        }\n        for (const parameter of parameters) {\n            if (acc.has(parameter)) {\n                return false;\n            }\n            acc.add(parameter);\n        }\n    }\n    return true;\n};\n","function isObjectLike(value) {\n    return typeof value === 'object' && value !== null;\n}\nexport default (input) => {\n    if (!isObjectLike(input) || Object.prototype.toString.call(input) !== '[object Object]') {\n        return false;\n    }\n    if (Object.getPrototypeOf(input) === null) {\n        return true;\n    }\n    let proto = input;\n    while (Object.getPrototypeOf(proto) !== null) {\n        proto = Object.getPrototypeOf(proto);\n    }\n    return Object.getPrototypeOf(input) === proto;\n};\n","import { checkEncCryptoKey } from './crypto_key.js';\nfunction checkKeySize(key, alg) {\n    if (key.algorithm.length !== parseInt(alg.slice(1, 4), 10)) {\n        throw new TypeError(`Invalid key size for alg: ${alg}`);\n    }\n}\nfunction getCryptoKey(key, alg, usage) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'AES-KW', true, [usage]);\n    }\n    checkEncCryptoKey(key, alg, usage);\n    return key;\n}\nexport async function wrap(alg, key, cek) {\n    const cryptoKey = await getCryptoKey(key, alg, 'wrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.importKey('raw', cek, { hash: 'SHA-256', name: 'HMAC' }, true, ['sign']);\n    return new Uint8Array(await crypto.subtle.wrapKey('raw', cryptoKeyCek, cryptoKey, 'AES-KW'));\n}\nexport async function unwrap(alg, key, encryptedKey) {\n    const cryptoKey = await getCryptoKey(key, alg, 'unwrapKey');\n    checkKeySize(cryptoKey, alg);\n    const cryptoKeyCek = await crypto.subtle.unwrapKey('raw', encryptedKey, cryptoKey, 'AES-KW', { hash: 'SHA-256', name: 'HMAC' }, true, ['sign']);\n    return new Uint8Array(await crypto.subtle.exportKey('raw', cryptoKeyCek));\n}\n","export default async (algorithm, data) => {\n    const subtleDigest = `SHA-${algorithm.slice(-3)}`;\n    return new Uint8Array(await crypto.subtle.digest(subtleDigest, data));\n};\n","import { encoder, concat, uint32be } from './buffer_utils.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport digest from './digest.js';\nfunction lengthAndInput(input) {\n    return concat(uint32be(input.length), input);\n}\nasync function concatKdf(secret, bits, value) {\n    const iterations = Math.ceil((bits >> 3) / 32);\n    const res = new Uint8Array(iterations * 32);\n    for (let iter = 0; iter < iterations; iter++) {\n        const buf = new Uint8Array(4 + secret.length + value.length);\n        buf.set(uint32be(iter + 1));\n        buf.set(secret, 4);\n        buf.set(value, 4 + secret.length);\n        res.set(await digest('sha256', buf), iter * 32);\n    }\n    return res.slice(0, bits >> 3);\n}\nexport async function deriveKey(publicKey, privateKey, algorithm, keyLength, apu = new Uint8Array(0), apv = new Uint8Array(0)) {\n    checkEncCryptoKey(publicKey, 'ECDH');\n    checkEncCryptoKey(privateKey, 'ECDH', 'deriveBits');\n    const value = concat(lengthAndInput(encoder.encode(algorithm)), lengthAndInput(apu), lengthAndInput(apv), uint32be(keyLength));\n    let length;\n    if (publicKey.algorithm.name === 'X25519') {\n        length = 256;\n    }\n    else {\n        length =\n            Math.ceil(parseInt(publicKey.algorithm.namedCurve.slice(-3), 10) / 8) << 3;\n    }\n    const sharedSecret = new Uint8Array(await crypto.subtle.deriveBits({\n        name: publicKey.algorithm.name,\n        public: publicKey,\n    }, privateKey, length));\n    return concatKdf(sharedSecret, keyLength, value);\n}\nexport function allowed(key) {\n    switch (key.algorithm.namedCurve) {\n        case 'P-256':\n        case 'P-384':\n        case 'P-521':\n            return true;\n        default:\n            return key.algorithm.name === 'X25519';\n    }\n}\n","import { encode as b64u } from '../util/base64url.js';\nimport * as aeskw from './aeskw.js';\nimport { checkEncCryptoKey } from './crypto_key.js';\nimport { concat, encoder } from './buffer_utils.js';\nimport { JWEInvalid } from '../util/errors.js';\nfunction getCryptoKey(key, alg) {\n    if (key instanceof Uint8Array) {\n        return crypto.subtle.importKey('raw', key, 'PBKDF2', false, ['deriveBits']);\n    }\n    checkEncCryptoKey(key, alg, 'deriveBits');\n    return key;\n}\nconst concatSalt = (alg, p2sInput) => concat(encoder.encode(alg), new Uint8Array([0]), p2sInput);\nasync function deriveKey(p2s, alg, p2c, key) {\n    if (!(p2s instanceof Uint8Array) || p2s.length < 8) {\n        throw new JWEInvalid('PBES2 Salt Input must be 8 or more octets');\n    }\n    const salt = concatSalt(alg, p2s);\n    const keylen = parseInt(alg.slice(13, 16), 10);\n    const subtleAlg = {\n        hash: `SHA-${alg.slice(8, 11)}`,\n        iterations: p2c,\n        name: 'PBKDF2',\n        salt,\n    };\n    const cryptoKey = await getCryptoKey(key, alg);\n    return new Uint8Array(await crypto.subtle.deriveBits(subtleAlg, cryptoKey, keylen));\n}\nexport async function wrap(alg, key, cek, p2c = 2048, p2s = crypto.getRandomValues(new Uint8Array(16))) {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    const encryptedKey = await aeskw.wrap(alg.slice(-6), derived, cek);\n    return { encryptedKey, p2c, p2s: b64u(p2s) };\n}\nexport async function unwrap(alg, key, encryptedKey, p2c, p2s) {\n    const derived = await deriveKey(p2s, alg, p2c, key);\n    return aeskw.unwrap(alg.slice(-6), derived, encryptedKey);\n}\n","export default (alg, key) => {\n    if (alg.startsWith('RS') || alg.startsWith('PS')) {\n        const { modulusLength } = key.algorithm;\n        if (typeof modulusLength !== 'number' || modulusLength < 2048) {\n            throw new TypeError(`${alg} requires key modulusLength to be 2048 bits or larger`);\n        }\n    }\n};\n","import { checkEncCryptoKey } from './crypto_key.js';\nimport checkKeyLength from './check_key_length.js';\nimport { JOSENotSupported } from '../util/errors.js';\nconst subtleAlgorithm = (alg) => {\n    switch (alg) {\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512':\n            return 'RSA-OAEP';\n        default:\n            throw new JOSENotSupported(`alg ${alg} is not supported either by JOSE or your javascript runtime`);\n    }\n};\nexport async function encrypt(alg, key, cek) {\n    checkEncCryptoKey(key, alg, 'encrypt');\n    checkKeyLength(alg, key);\n    return new Uint8Array(await crypto.subtle.encrypt(subtleAlgorithm(alg), key, cek));\n}\nexport async function decrypt(alg, key, encryptedKey) {\n    checkEncCryptoKey(key, alg, 'decrypt');\n    checkKeyLength(alg, key);\n    return new Uint8Array(await crypto.subtle.decrypt(subtleAlgorithm(alg), key, encryptedKey));\n}\n","import { JOSENotSupported } from '../util/errors.js';\nexport function bitLength(alg) {\n    switch (alg) {\n        case 'A128GCM':\n            return 128;\n        case 'A192GCM':\n            return 192;\n        case 'A256GCM':\n        case 'A128CBC-HS256':\n            return 256;\n        case 'A192CBC-HS384':\n            return 384;\n        case 'A256CBC-HS512':\n            return 512;\n        default:\n            throw new JOSENotSupported(`Unsupported JWE Algorithm: ${alg}`);\n    }\n}\nexport default (alg) => crypto.getRandomValues(new Uint8Array(bitLength(alg) >> 3));\n","import { JOSENotSupported } from '../util/errors.js';\nfunction subtleMapping(jwk) {\n    let algorithm;\n    let keyUsages;\n    switch (jwk.kty) {\n        case 'RSA': {\n            switch (jwk.alg) {\n                case 'PS256':\n                case 'PS384':\n                case 'PS512':\n                    algorithm = { name: 'RSA-PSS', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RS256':\n                case 'RS384':\n                case 'RS512':\n                    algorithm = { name: 'RSASSA-PKCS1-v1_5', hash: `SHA-${jwk.alg.slice(-3)}` };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'RSA-OAEP':\n                case 'RSA-OAEP-256':\n                case 'RSA-OAEP-384':\n                case 'RSA-OAEP-512':\n                    algorithm = {\n                        name: 'RSA-OAEP',\n                        hash: `SHA-${parseInt(jwk.alg.slice(-3), 10) || 1}`,\n                    };\n                    keyUsages = jwk.d ? ['decrypt', 'unwrapKey'] : ['encrypt', 'wrapKey'];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'EC': {\n            switch (jwk.alg) {\n                case 'ES256':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-256' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES384':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-384' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ES512':\n                    algorithm = { name: 'ECDSA', namedCurve: 'P-521' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: 'ECDH', namedCurve: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        case 'OKP': {\n            switch (jwk.alg) {\n                case 'Ed25519':\n                case 'EdDSA':\n                    algorithm = { name: 'Ed25519' };\n                    keyUsages = jwk.d ? ['sign'] : ['verify'];\n                    break;\n                case 'ECDH-ES':\n                case 'ECDH-ES+A128KW':\n                case 'ECDH-ES+A192KW':\n                case 'ECDH-ES+A256KW':\n                    algorithm = { name: jwk.crv };\n                    keyUsages = jwk.d ? ['deriveBits'] : [];\n                    break;\n                default:\n                    throw new JOSENotSupported('Invalid or unsupported JWK \"alg\" (Algorithm) Parameter value');\n            }\n            break;\n        }\n        default:\n            throw new JOSENotSupported('Invalid or unsupported JWK \"kty\" (Key Type) Parameter value');\n    }\n    return { algorithm, keyUsages };\n}\nexport default async (jwk) => {\n    if (!jwk.alg) {\n        throw new TypeError('\"alg\" argument is required when \"jwk.alg\" is not present');\n    }\n    const { algorithm, keyUsages } = subtleMapping(jwk);\n    const keyData = { ...jwk };\n    delete keyData.alg;\n    delete keyData.use;\n    return crypto.subtle.importKey('jwk', keyData, algorithm, jwk.ext ?? (jwk.d ? false : true), jwk.key_ops ?? keyUsages);\n};\n","import { decode as decodeBase64URL } from '../util/base64url.js';\nimport { fromSPKI, fromPKCS8, fromX509 } from '../lib/asn1.js';\nimport toCryptoKey from '../lib/jwk_to_key.js';\nimport { JOSENotSupported } from '../util/errors.js';\nimport isObject from '../lib/is_object.js';\nexport async function importSPKI(spki, alg, options) {\n    if (typeof spki !== 'string' || spki.indexOf('-----BEGIN PUBLIC KEY-----') !== 0) {\n        throw new TypeError('\"spki\" must be SPKI formatted string');\n    }\n    return fromSPKI(spki, alg, options);\n}\nexport async function importX509(x509, alg, options) {\n    if (typeof x509 !== 'string' || x509.indexOf('-----BEGIN CERTIFICATE-----') !== 0) {\n        throw new TypeError('\"x509\" must be X.509 formatted string');\n    }\n    return fromX509(x509, alg, options);\n}\nexport async function importPKCS8(pkcs8, alg, options) {\n    if (typeof pkcs8 !== 'string' || pkcs8.indexOf('-----BEGIN PRIVATE KEY-----') !== 0) {\n        throw new TypeError('\"pkcs8\" must be PKCS#8 formatted string');\n    }\n    return fromPKCS8(pkcs8, alg, options);\n}\nexport async function importJWK(jwk, alg, options) {\n    if (!isObject(jwk)) {\n        throw new TypeError('JWK must be an object');\n    }\n    let ext;\n    alg ??= jwk.alg;\n    ext ??= options?.extractable ?? jwk.ext;\n    switch (jwk.kty) {\n        case 'oct':\n            if (typeof jwk.k !== 'string' || !jwk.k) {\n                throw new TypeError('missing \"k\" (Key Value) Parameter value');\n            }\n            return decodeBase64URL(jwk.k);\n        case 'RSA':\n            if ('oth' in jwk && jwk.oth !== undefined) {\n                throw new JOSENotSupported('RSA JWK \"oth\" (Other Primes Info) Parameter value is not supported');\n            }\n        case 'EC':\n        case 'OKP':\n            return toCryptoKey({ ...jwk, alg, ext });\n        default:\n            throw new JOSENotSupported('Unsupported \"kty\" (Key Type) Parameter value');\n    }\n}\n","import encrypt from './encrypt.js';\nimport decrypt from './decrypt.js';\nimport { encode as b64u } from '../util/base64url.js';\nexport async function wrap(alg, key, cek, iv) {\n    const jweAlgorithm = alg.slice(0, 7);\n    const wrapped = await encrypt(jweAlgorithm, cek, key, iv, new Uint8Array(0));\n    return {\n        encryptedKey: wrapped.ciphertext,\n        iv: b64u(wrapped.iv),\n        tag: b64u(wrapped.tag),\n    };\n}\nexport async function unwrap(alg, key, encryptedKey, iv, tag) {\n    const jweAlgorithm = alg.slice(0, 7);\n    return decrypt(jweAlgorithm, key, encryptedKey, iv, tag, new Uint8Array(0));\n}\n","import * as aeskw from './aeskw.js';\nimport * as ecdhes from './ecdhes.js';\nimport * as pbes2kw from './pbes2kw.js';\nimport * as rsaes from './rsaes.js';\nimport { decode as b64u } from '../util/base64url.js';\nimport { JOSENotSupported, JWEInvalid } from '../util/errors.js';\nimport { bitLength as cekLength } from '../lib/cek.js';\nimport { importJWK } from '../key/import.js';\nimport isObject from './is_object.js';\nimport { unwrap as aesGcmKw } from './aesgcmkw.js';\nimport { assertCryptoKey } from './is_key_like.js';\nexport default async (alg, key, encryptedKey, joseHeader, options) => {\n    switch (alg) {\n        case 'dir': {\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n            return key;\n        }\n        case 'ECDH-ES':\n            if (encryptedKey !== undefined)\n                throw new JWEInvalid('Encountered unexpected JWE Encrypted Key');\n        case 'ECDH-ES+A128KW':\n        case 'ECDH-ES+A192KW':\n        case 'ECDH-ES+A256KW': {\n            if (!isObject(joseHeader.epk))\n                throw new JWEInvalid(`JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid`);\n            assertCryptoKey(key);\n            if (!ecdhes.allowed(key))\n                throw new JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');\n            const epk = await importJWK(joseHeader.epk, alg);\n            assertCryptoKey(epk);\n            let partyUInfo;\n            let partyVInfo;\n            if (joseHeader.apu !== undefined) {\n                if (typeof joseHeader.apu !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apu\" (Agreement PartyUInfo) invalid`);\n                try {\n                    partyUInfo = b64u(joseHeader.apu);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apu');\n                }\n            }\n            if (joseHeader.apv !== undefined) {\n                if (typeof joseHeader.apv !== 'string')\n                    throw new JWEInvalid(`JOSE Header \"apv\" (Agreement PartyVInfo) invalid`);\n                try {\n                    partyVInfo = b64u(joseHeader.apv);\n                }\n                catch {\n                    throw new JWEInvalid('Failed to base64url decode the apv');\n                }\n            }\n            const sharedSecret = await ecdhes.deriveKey(epk, key, alg === 'ECDH-ES' ? joseHeader.enc : alg, alg === 'ECDH-ES' ? cekLength(joseHeader.enc) : parseInt(alg.slice(-5, -2), 10), partyUInfo, partyVInfo);\n            if (alg === 'ECDH-ES')\n                return sharedSecret;\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aeskw.unwrap(alg.slice(-6), sharedSecret, encryptedKey);\n        }\n        case 'RSA-OAEP':\n        case 'RSA-OAEP-256':\n        case 'RSA-OAEP-384':\n        case 'RSA-OAEP-512': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            assertCryptoKey(key);\n            return rsaes.decrypt(alg, key, encryptedKey);\n        }\n        case 'PBES2-HS256+A128KW':\n        case 'PBES2-HS384+A192KW':\n        case 'PBES2-HS512+A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.p2c !== 'number')\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) missing or invalid`);\n            const p2cLimit = options?.maxPBES2Count || 10_000;\n            if (joseHeader.p2c > p2cLimit)\n                throw new JWEInvalid(`JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds`);\n            if (typeof joseHeader.p2s !== 'string')\n                throw new JWEInvalid(`JOSE Header \"p2s\" (PBES2 Salt) missing or invalid`);\n            let p2s;\n            try {\n                p2s = b64u(joseHeader.p2s);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the p2s');\n            }\n            return pbes2kw.unwrap(alg, key, encryptedKey, joseHeader.p2c, p2s);\n        }\n        case 'A128KW':\n        case 'A192KW':\n        case 'A256KW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            return aeskw.unwrap(alg, key, encryptedKey);\n        }\n        case 'A128GCMKW':\n        case 'A192GCMKW':\n        case 'A256GCMKW': {\n            if (encryptedKey === undefined)\n                throw new JWEInvalid('JWE Encrypted Key missing');\n            if (typeof joseHeader.iv !== 'string')\n                throw new JWEInvalid(`JOSE Header \"iv\" (Initialization Vector) missing or invalid`);\n            if (typeof joseHeader.tag !== 'string')\n                throw new JWEInvalid(`JOSE Header \"tag\" (Authentication Tag) missing or invalid`);\n            let iv;\n            try {\n                iv = b64u(joseHeader.iv);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the iv');\n            }\n            let tag;\n            try {\n                tag = b64u(joseHeader.tag);\n            }\n            catch {\n                throw new JWEInvalid('Failed to base64url decode the tag');\n            }\n            return aesGcmKw(alg, key, encryptedKey, iv, tag);\n        }\n        default: {\n            throw new JOSENotSupported('Invalid or unsupported \"alg\" (JWE Algorithm) header value');\n        }\n    }\n};\n","import { JOSENotSupported, JWEInvalid, JWSInvalid } from '../util/errors.js';\nexport default (Err, recognizedDefault, recognizedOption, protectedHeader, joseHeader) => {\n    if (joseHeader.crit !== undefined && protectedHeader?.crit === undefined) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be integrity protected');\n    }\n    if (!protectedHeader || protectedHeader.crit === undefined) {\n        return new Set();\n    }\n    if (!Array.isArray(protectedHeader.crit) ||\n        protectedHeader.crit.length === 0 ||\n        protectedHeader.crit.some((input) => typeof input !== 'string' || input.length === 0)) {\n        throw new Err('\"crit\" (Critical) Header Parameter MUST be an array of non-empty strings when present');\n    }\n    let recognized;\n    if (recognizedOption !== undefined) {\n        recognized = new Map([...Object.entries(recognizedOption), ...recognizedDefault.entries()]);\n    }\n    else {\n        recognized = recognizedDefault;\n    }\n    for (const parameter of protectedHeader.crit) {\n        if (!recognized.has(parameter)) {\n            throw new JOSENotSupported(`Extension Header Parameter \"${parameter}\" is not recognized`);\n        }\n        if (joseHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" is missing`);\n        }\n        if (recognized.get(parameter) && protectedHeader[parameter] === undefined) {\n            throw new Err(`Extension Header Parameter \"${parameter}\" MUST be integrity protected`);\n        }\n    }\n    return new Set(protectedHeader.crit);\n};\n","export default (option, algorithms) => {\n    if (algorithms !== undefined &&\n        (!Array.isArray(algorithms) || algorithms.some((s) => typeof s !== 'string'))) {\n        throw new TypeError(`\"${option}\" option must be an array of strings`);\n    }\n    if (!algorithms) {\n        return undefined;\n    }\n    return new Set(algorithms);\n};\n","import isObject from './is_object.js';\nexport function isJWK(key) {\n    return isObject(key) && typeof key.kty === 'string';\n}\nexport function isPrivateJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'string';\n}\nexport function isPublicJWK(key) {\n    return key.kty !== 'oct' && typeof key.d === 'undefined';\n}\nexport function isSecretJWK(key) {\n    return key.kty === 'oct' && typeof key.k === 'string';\n}\n","import { isJWK } from './is_jwk.js';\nimport { decode } from '../util/base64url.js';\nimport importJWK from './jwk_to_key.js';\nimport { isCryptoKey, isKeyObject } from './is_key_like.js';\nlet cache;\nconst handleJWK = async (key, jwk, alg, freeze = false) => {\n    cache ||= new WeakMap();\n    let cached = cache.get(key);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const cryptoKey = await importJWK({ ...jwk, alg });\n    if (freeze)\n        Object.freeze(key);\n    if (!cached) {\n        cache.set(key, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nconst handleKeyObject = (keyObject, alg) => {\n    cache ||= new WeakMap();\n    let cached = cache.get(keyObject);\n    if (cached?.[alg]) {\n        return cached[alg];\n    }\n    const isPublic = keyObject.type === 'public';\n    const extractable = isPublic ? true : false;\n    let cryptoKey;\n    if (keyObject.asymmetricKeyType === 'x25519') {\n        switch (alg) {\n            case 'ECDH-ES':\n            case 'ECDH-ES+A128KW':\n            case 'ECDH-ES+A192KW':\n            case 'ECDH-ES+A256KW':\n                break;\n            default:\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, isPublic ? [] : ['deriveBits']);\n    }\n    if (keyObject.asymmetricKeyType === 'ed25519') {\n        if (alg !== 'EdDSA' && alg !== 'Ed25519') {\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        cryptoKey = keyObject.toCryptoKey(keyObject.asymmetricKeyType, extractable, [\n            isPublic ? 'verify' : 'sign',\n        ]);\n    }\n    if (keyObject.asymmetricKeyType === 'rsa') {\n        let hash;\n        switch (alg) {\n            case 'RSA-OAEP':\n                hash = 'SHA-1';\n                break;\n            case 'RS256':\n            case 'PS256':\n            case 'RSA-OAEP-256':\n                hash = 'SHA-256';\n                break;\n            case 'RS384':\n            case 'PS384':\n            case 'RSA-OAEP-384':\n                hash = 'SHA-384';\n                break;\n            case 'RS512':\n            case 'PS512':\n            case 'RSA-OAEP-512':\n                hash = 'SHA-512';\n                break;\n            default:\n                throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        if (alg.startsWith('RSA-OAEP')) {\n            return keyObject.toCryptoKey({\n                name: 'RSA-OAEP',\n                hash,\n            }, extractable, isPublic ? ['encrypt'] : ['decrypt']);\n        }\n        cryptoKey = keyObject.toCryptoKey({\n            name: alg.startsWith('PS') ? 'RSA-PSS' : 'RSASSA-PKCS1-v1_5',\n            hash,\n        }, extractable, [isPublic ? 'verify' : 'sign']);\n    }\n    if (keyObject.asymmetricKeyType === 'ec') {\n        const nist = new Map([\n            ['prime256v1', 'P-256'],\n            ['secp384r1', 'P-384'],\n            ['secp521r1', 'P-521'],\n        ]);\n        const namedCurve = nist.get(keyObject.asymmetricKeyDetails?.namedCurve);\n        if (!namedCurve) {\n            throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n        }\n        if (alg === 'ES256' && namedCurve === 'P-256') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg === 'ES384' && namedCurve === 'P-384') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg === 'ES512' && namedCurve === 'P-521') {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDSA',\n                namedCurve,\n            }, extractable, [isPublic ? 'verify' : 'sign']);\n        }\n        if (alg.startsWith('ECDH-ES')) {\n            cryptoKey = keyObject.toCryptoKey({\n                name: 'ECDH',\n                namedCurve,\n            }, extractable, isPublic ? [] : ['deriveBits']);\n        }\n    }\n    if (!cryptoKey) {\n        throw new TypeError('given KeyObject instance cannot be used for this algorithm');\n    }\n    if (!cached) {\n        cache.set(keyObject, { [alg]: cryptoKey });\n    }\n    else {\n        cached[alg] = cryptoKey;\n    }\n    return cryptoKey;\n};\nexport default async (key, alg) => {\n    if (key instanceof Uint8Array) {\n        return key;\n    }\n    if (isCryptoKey(key)) {\n        return key;\n    }\n    if (isKeyObject(key)) {\n        if (key.type === 'secret') {\n            return key.export();\n        }\n        if ('toCryptoKey' in key && typeof key.toCryptoKey === 'function') {\n            try {\n                return handleKeyObject(key, alg);\n            }\n            catch (err) {\n                if (err instanceof TypeError) {\n                    throw err;\n                }\n            }\n        }\n        let jwk = key.export({ format: 'jwk' });\n        return handleJWK(key, jwk, alg);\n    }\n    if (isJWK(key)) {\n        if (key.k) {\n            return decode(key.k);\n        }\n        return handleJWK(key, key, alg, true);\n    }\n    throw new Error('unreachable');\n};\n","import { withAlg as invalidKeyInput } from './invalid_key_input.js';\nimport isKeyLike from './is_key_like.js';\nimport * as jwk from './is_jwk.js';\nconst tag = (key) => key?.[Symbol.toStringTag];\nconst jwkMatchesOp = (alg, key, usage) => {\n    if (key.use !== undefined) {\n        let expected;\n        switch (usage) {\n            case 'sign':\n            case 'verify':\n                expected = 'sig';\n                break;\n            case 'encrypt':\n            case 'decrypt':\n                expected = 'enc';\n                break;\n        }\n        if (key.use !== expected) {\n            throw new TypeError(`Invalid key for this operation, its \"use\" must be \"${expected}\" when present`);\n        }\n    }\n    if (key.alg !== undefined && key.alg !== alg) {\n        throw new TypeError(`Invalid key for this operation, its \"alg\" must be \"${alg}\" when present`);\n    }\n    if (Array.isArray(key.key_ops)) {\n        let expectedKeyOp;\n        switch (true) {\n            case usage === 'sign' || usage === 'verify':\n            case alg === 'dir':\n            case alg.includes('CBC-HS'):\n                expectedKeyOp = usage;\n                break;\n            case alg.startsWith('PBES2'):\n                expectedKeyOp = 'deriveBits';\n                break;\n            case /^A\\d{3}(?:GCM)?(?:KW)?$/.test(alg):\n                if (!alg.includes('GCM') && alg.endsWith('KW')) {\n                    expectedKeyOp = usage === 'encrypt' ? 'wrapKey' : 'unwrapKey';\n                }\n                else {\n                    expectedKeyOp = usage;\n                }\n                break;\n            case usage === 'encrypt' && alg.startsWith('RSA'):\n                expectedKeyOp = 'wrapKey';\n                break;\n            case usage === 'decrypt':\n                expectedKeyOp = alg.startsWith('RSA') ? 'unwrapKey' : 'deriveBits';\n                break;\n        }\n        if (expectedKeyOp && key.key_ops?.includes?.(expectedKeyOp) === false) {\n            throw new TypeError(`Invalid key for this operation, its \"key_ops\" must include \"${expectedKeyOp}\" when present`);\n        }\n    }\n    return true;\n};\nconst symmetricTypeCheck = (alg, key, usage) => {\n    if (key instanceof Uint8Array)\n        return;\n    if (jwk.isJWK(key)) {\n        if (jwk.isSecretJWK(key) && jwkMatchesOp(alg, key, usage))\n            return;\n        throw new TypeError(`JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present`);\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key', 'Uint8Array'));\n    }\n    if (key.type !== 'secret') {\n        throw new TypeError(`${tag(key)} instances for symmetric algorithms must be of type \"secret\"`);\n    }\n};\nconst asymmetricTypeCheck = (alg, key, usage) => {\n    if (jwk.isJWK(key)) {\n        switch (usage) {\n            case 'decrypt':\n            case 'sign':\n                if (jwk.isPrivateJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a private JWK`);\n            case 'encrypt':\n            case 'verify':\n                if (jwk.isPublicJWK(key) && jwkMatchesOp(alg, key, usage))\n                    return;\n                throw new TypeError(`JSON Web Key for this operation be a public JWK`);\n        }\n    }\n    if (!isKeyLike(key)) {\n        throw new TypeError(invalidKeyInput(alg, key, 'CryptoKey', 'KeyObject', 'JSON Web Key'));\n    }\n    if (key.type === 'secret') {\n        throw new TypeError(`${tag(key)} instances for asymmetric algorithms must not be of type \"secret\"`);\n    }\n    if (key.type === 'public') {\n        switch (usage) {\n            case 'sign':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm signing must be of type \"private\"`);\n            case 'decrypt':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm decryption must be of type \"private\"`);\n            default:\n                break;\n        }\n    }\n    if (key.type === 'private') {\n        switch (usage) {\n            case 'verify':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm verifying must be of type \"public\"`);\n            case 'encrypt':\n                throw new TypeError(`${tag(key)} instances for asymmetric algorithm encryption must be of type \"public\"`);\n            default:\n                break;\n        }\n    }\n};\nexport default (alg, key, usage) => {\n    const symmetric = alg.startsWith('HS') ||\n        alg === 'dir' ||\n        alg.startsWith('PBES2') ||\n        /^A(?:128|192|256)(?:GCM)?(?:KW)?$/.test(alg) ||\n        /^A(?:128|192|256)CBC-HS(?:256|384|512)$/.test(alg);\n    if (symmetric) {\n        symmetricTypeCheck(alg, key, usage);\n    }\n    else {\n        asymmetricTypeCheck(alg, key, usage);\n    }\n};\n","import { decode as b64u } from '../../util/base64url.js';\nimport decrypt from '../../lib/decrypt.js';\nimport { JOSEAlgNotAllowed, JOSENotSupported, JWEInvalid } from '../../util/errors.js';\nimport isDisjoint from '../../lib/is_disjoint.js';\nimport isObject from '../../lib/is_object.js';\nimport decryptKeyManagement from '../../lib/decrypt_key_management.js';\nimport { encoder, decoder, concat } from '../../lib/buffer_utils.js';\nimport generateCek from '../../lib/cek.js';\nimport validateCrit from '../../lib/validate_crit.js';\nimport validateAlgorithms from '../../lib/validate_algorithms.js';\nimport normalizeKey from '../../lib/normalize_key.js';\nimport checkKeyType from '../../lib/check_key_type.js';\nexport async function flattenedDecrypt(jwe, key, options) {\n    if (!isObject(jwe)) {\n        throw new JWEInvalid('Flattened JWE must be an object');\n    }\n    if (jwe.protected === undefined && jwe.header === undefined && jwe.unprotected === undefined) {\n        throw new JWEInvalid('JOSE Header missing');\n    }\n    if (jwe.iv !== undefined && typeof jwe.iv !== 'string') {\n        throw new JWEInvalid('JWE Initialization Vector incorrect type');\n    }\n    if (typeof jwe.ciphertext !== 'string') {\n        throw new JWEInvalid('JWE Ciphertext missing or incorrect type');\n    }\n    if (jwe.tag !== undefined && typeof jwe.tag !== 'string') {\n        throw new JWEInvalid('JWE Authentication Tag incorrect type');\n    }\n    if (jwe.protected !== undefined && typeof jwe.protected !== 'string') {\n        throw new JWEInvalid('JWE Protected Header incorrect type');\n    }\n    if (jwe.encrypted_key !== undefined && typeof jwe.encrypted_key !== 'string') {\n        throw new JWEInvalid('JWE Encrypted Key incorrect type');\n    }\n    if (jwe.aad !== undefined && typeof jwe.aad !== 'string') {\n        throw new JWEInvalid('JWE AAD incorrect type');\n    }\n    if (jwe.header !== undefined && !isObject(jwe.header)) {\n        throw new JWEInvalid('JWE Shared Unprotected Header incorrect type');\n    }\n    if (jwe.unprotected !== undefined && !isObject(jwe.unprotected)) {\n        throw new JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');\n    }\n    let parsedProt;\n    if (jwe.protected) {\n        try {\n            const protectedHeader = b64u(jwe.protected);\n            parsedProt = JSON.parse(decoder.decode(protectedHeader));\n        }\n        catch {\n            throw new JWEInvalid('JWE Protected Header is invalid');\n        }\n    }\n    if (!isDisjoint(parsedProt, jwe.header, jwe.unprotected)) {\n        throw new JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');\n    }\n    const joseHeader = {\n        ...parsedProt,\n        ...jwe.header,\n        ...jwe.unprotected,\n    };\n    validateCrit(JWEInvalid, new Map(), options?.crit, parsedProt, joseHeader);\n    if (joseHeader.zip !== undefined) {\n        throw new JOSENotSupported('JWE \"zip\" (Compression Algorithm) Header Parameter is not supported.');\n    }\n    const { alg, enc } = joseHeader;\n    if (typeof alg !== 'string' || !alg) {\n        throw new JWEInvalid('missing JWE Algorithm (alg) in JWE Header');\n    }\n    if (typeof enc !== 'string' || !enc) {\n        throw new JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');\n    }\n    const keyManagementAlgorithms = options && validateAlgorithms('keyManagementAlgorithms', options.keyManagementAlgorithms);\n    const contentEncryptionAlgorithms = options &&\n        validateAlgorithms('contentEncryptionAlgorithms', options.contentEncryptionAlgorithms);\n    if ((keyManagementAlgorithms && !keyManagementAlgorithms.has(alg)) ||\n        (!keyManagementAlgorithms && alg.startsWith('PBES2'))) {\n        throw new JOSEAlgNotAllowed('\"alg\" (Algorithm) Header Parameter value not allowed');\n    }\n    if (contentEncryptionAlgorithms && !contentEncryptionAlgorithms.has(enc)) {\n        throw new JOSEAlgNotAllowed('\"enc\" (Encryption Algorithm) Header Parameter value not allowed');\n    }\n    let encryptedKey;\n    if (jwe.encrypted_key !== undefined) {\n        try {\n            encryptedKey = b64u(jwe.encrypted_key);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the encrypted_key');\n        }\n    }\n    let resolvedKey = false;\n    if (typeof key === 'function') {\n        key = await key(parsedProt, jwe);\n        resolvedKey = true;\n    }\n    checkKeyType(alg === 'dir' ? enc : alg, key, 'decrypt');\n    const k = await normalizeKey(key, alg);\n    let cek;\n    try {\n        cek = await decryptKeyManagement(alg, k, encryptedKey, joseHeader, options);\n    }\n    catch (err) {\n        if (err instanceof TypeError || err instanceof JWEInvalid || err instanceof JOSENotSupported) {\n            throw err;\n        }\n        cek = generateCek(enc);\n    }\n    let iv;\n    let tag;\n    if (jwe.iv !== undefined) {\n        try {\n            iv = b64u(jwe.iv);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the iv');\n        }\n    }\n    if (jwe.tag !== undefined) {\n        try {\n            tag = b64u(jwe.tag);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the tag');\n        }\n    }\n    const protectedHeader = encoder.encode(jwe.protected ?? '');\n    let additionalData;\n    if (jwe.aad !== undefined) {\n        additionalData = concat(protectedHeader, encoder.encode('.'), encoder.encode(jwe.aad));\n    }\n    else {\n        additionalData = protectedHeader;\n    }\n    let ciphertext;\n    try {\n        ciphertext = b64u(jwe.ciphertext);\n    }\n    catch {\n        throw new JWEInvalid('Failed to base64url decode the ciphertext');\n    }\n    const plaintext = await decrypt(enc, cek, ciphertext, iv, tag, additionalData);\n    const result = { plaintext };\n    if (jwe.protected !== undefined) {\n        result.protectedHeader = parsedProt;\n    }\n    if (jwe.aad !== undefined) {\n        try {\n            result.additionalAuthenticatedData = b64u(jwe.aad);\n        }\n        catch {\n            throw new JWEInvalid('Failed to base64url decode the aad');\n        }\n    }\n    if (jwe.unprotected !== undefined) {\n        result.sharedUnprotectedHeader = jwe.unprotected;\n    }\n    if (jwe.header !== undefined) {\n        result.unprotectedHeader = jwe.header;\n    }\n    if (resolvedKey) {\n        return { ...result, key: k };\n    }\n    return result;\n}\n","import { flattenedDecrypt } from '../flattened/decrypt.js';\nimport { JWEInvalid } from '../../util/errors.js';\nimport { decoder } from '../../lib/buffer_utils.js';\nexport async function compactDecrypt(jwe, key, options) {\n    if (jwe instanceof Uint8Array) {\n        jwe = decoder.decode(jwe);\n    }\n    if (typeof jwe !== 'string') {\n        throw new JWEInvalid('Compact JWE must be a string or Uint8Array');\n    }\n    const { 0: protectedHeader, 1: encryptedKey, 2: iv, 3: ciphertext, 4: tag, length, } = jwe.split('.');\n    if (length !== 5) {\n        throw new JWEInvalid('Invalid Compact JWE');\n    }\n    const decrypted = await flattenedDecrypt({\n        ciphertext,\n        iv: iv || undefined,\n        protected: protectedHeader,\n        tag: tag || undefined,\n        encrypted_key: encryptedKey || undefined,\n    }, key, options);\n    const result = { plaintext: decrypted.plaintext, protectedHeader: decrypted.protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","export default (date) => Math.floor(date.getTime() / 1000);\n","const minute = 60;\nconst hour = minute * 60;\nconst day = hour * 24;\nconst week = day * 7;\nconst year = day * 365.25;\nconst REGEX = /^(\\+|\\-)? ?(\\d+|\\d+\\.\\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;\nexport default (str) => {\n    const matched = REGEX.exec(str);\n    if (!matched || (matched[4] && matched[1])) {\n        throw new TypeError('Invalid time period format');\n    }\n    const value = parseFloat(matched[2]);\n    const unit = matched[3].toLowerCase();\n    let numericDate;\n    switch (unit) {\n        case 'sec':\n        case 'secs':\n        case 'second':\n        case 'seconds':\n        case 's':\n            numericDate = Math.round(value);\n            break;\n        case 'minute':\n        case 'minutes':\n        case 'min':\n        case 'mins':\n        case 'm':\n            numericDate = Math.round(value * minute);\n            break;\n        case 'hour':\n        case 'hours':\n        case 'hr':\n        case 'hrs':\n        case 'h':\n            numericDate = Math.round(value * hour);\n            break;\n        case 'day':\n        case 'days':\n        case 'd':\n            numericDate = Math.round(value * day);\n            break;\n        case 'week':\n        case 'weeks':\n        case 'w':\n            numericDate = Math.round(value * week);\n            break;\n        default:\n            numericDate = Math.round(value * year);\n            break;\n    }\n    if (matched[1] === '-' || matched[4] === 'ago') {\n        return -numericDate;\n    }\n    return numericDate;\n};\n","import { JWTClaimValidationFailed, JWTExpired, JWTInvalid } from '../util/errors.js';\nimport { decoder } from './buffer_utils.js';\nimport epoch from './epoch.js';\nimport secs from './secs.js';\nimport isObject from './is_object.js';\nimport { encoder } from './buffer_utils.js';\nfunction validateInput(label, input) {\n    if (!Number.isFinite(input)) {\n        throw new TypeError(`Invalid ${label} input`);\n    }\n    return input;\n}\nconst normalizeTyp = (value) => {\n    if (value.includes('/')) {\n        return value.toLowerCase();\n    }\n    return `application/${value.toLowerCase()}`;\n};\nconst checkAudiencePresence = (audPayload, audOption) => {\n    if (typeof audPayload === 'string') {\n        return audOption.includes(audPayload);\n    }\n    if (Array.isArray(audPayload)) {\n        return audOption.some(Set.prototype.has.bind(new Set(audPayload)));\n    }\n    return false;\n};\nexport function validateClaimsSet(protectedHeader, encodedPayload, options = {}) {\n    let payload;\n    try {\n        payload = JSON.parse(decoder.decode(encodedPayload));\n    }\n    catch {\n    }\n    if (!isObject(payload)) {\n        throw new JWTInvalid('JWT Claims Set must be a top-level JSON object');\n    }\n    const { typ } = options;\n    if (typ &&\n        (typeof protectedHeader.typ !== 'string' ||\n            normalizeTyp(protectedHeader.typ) !== normalizeTyp(typ))) {\n        throw new JWTClaimValidationFailed('unexpected \"typ\" JWT header value', payload, 'typ', 'check_failed');\n    }\n    const { requiredClaims = [], issuer, subject, audience, maxTokenAge } = options;\n    const presenceCheck = [...requiredClaims];\n    if (maxTokenAge !== undefined)\n        presenceCheck.push('iat');\n    if (audience !== undefined)\n        presenceCheck.push('aud');\n    if (subject !== undefined)\n        presenceCheck.push('sub');\n    if (issuer !== undefined)\n        presenceCheck.push('iss');\n    for (const claim of new Set(presenceCheck.reverse())) {\n        if (!(claim in payload)) {\n            throw new JWTClaimValidationFailed(`missing required \"${claim}\" claim`, payload, claim, 'missing');\n        }\n    }\n    if (issuer &&\n        !(Array.isArray(issuer) ? issuer : [issuer]).includes(payload.iss)) {\n        throw new JWTClaimValidationFailed('unexpected \"iss\" claim value', payload, 'iss', 'check_failed');\n    }\n    if (subject && payload.sub !== subject) {\n        throw new JWTClaimValidationFailed('unexpected \"sub\" claim value', payload, 'sub', 'check_failed');\n    }\n    if (audience &&\n        !checkAudiencePresence(payload.aud, typeof audience === 'string' ? [audience] : audience)) {\n        throw new JWTClaimValidationFailed('unexpected \"aud\" claim value', payload, 'aud', 'check_failed');\n    }\n    let tolerance;\n    switch (typeof options.clockTolerance) {\n        case 'string':\n            tolerance = secs(options.clockTolerance);\n            break;\n        case 'number':\n            tolerance = options.clockTolerance;\n            break;\n        case 'undefined':\n            tolerance = 0;\n            break;\n        default:\n            throw new TypeError('Invalid clockTolerance option type');\n    }\n    const { currentDate } = options;\n    const now = epoch(currentDate || new Date());\n    if ((payload.iat !== undefined || maxTokenAge) && typeof payload.iat !== 'number') {\n        throw new JWTClaimValidationFailed('\"iat\" claim must be a number', payload, 'iat', 'invalid');\n    }\n    if (payload.nbf !== undefined) {\n        if (typeof payload.nbf !== 'number') {\n            throw new JWTClaimValidationFailed('\"nbf\" claim must be a number', payload, 'nbf', 'invalid');\n        }\n        if (payload.nbf > now + tolerance) {\n            throw new JWTClaimValidationFailed('\"nbf\" claim timestamp check failed', payload, 'nbf', 'check_failed');\n        }\n    }\n    if (payload.exp !== undefined) {\n        if (typeof payload.exp !== 'number') {\n            throw new JWTClaimValidationFailed('\"exp\" claim must be a number', payload, 'exp', 'invalid');\n        }\n        if (payload.exp <= now - tolerance) {\n            throw new JWTExpired('\"exp\" claim timestamp check failed', payload, 'exp', 'check_failed');\n        }\n    }\n    if (maxTokenAge) {\n        const age = now - payload.iat;\n        const max = typeof maxTokenAge === 'number' ? maxTokenAge : secs(maxTokenAge);\n        if (age - tolerance > max) {\n            throw new JWTExpired('\"iat\" claim timestamp check failed (too far in the past)', payload, 'iat', 'check_failed');\n        }\n        if (age < 0 - tolerance) {\n            throw new JWTClaimValidationFailed('\"iat\" claim timestamp check failed (it should be in the past)', payload, 'iat', 'check_failed');\n        }\n    }\n    return payload;\n}\nexport class JWTClaimsBuilder {\n    #payload;\n    constructor(payload) {\n        if (!isObject(payload)) {\n            throw new TypeError('JWT Claims Set MUST be an object');\n        }\n        this.#payload = structuredClone(payload);\n    }\n    data() {\n        return encoder.encode(JSON.stringify(this.#payload));\n    }\n    get iss() {\n        return this.#payload.iss;\n    }\n    set iss(value) {\n        this.#payload.iss = value;\n    }\n    get sub() {\n        return this.#payload.sub;\n    }\n    set sub(value) {\n        this.#payload.sub = value;\n    }\n    get aud() {\n        return this.#payload.aud;\n    }\n    set aud(value) {\n        this.#payload.aud = value;\n    }\n    set jti(value) {\n        this.#payload.jti = value;\n    }\n    set nbf(value) {\n        if (typeof value === 'number') {\n            this.#payload.nbf = validateInput('setNotBefore', value);\n        }\n        else if (value instanceof Date) {\n            this.#payload.nbf = validateInput('setNotBefore', epoch(value));\n        }\n        else {\n            this.#payload.nbf = epoch(new Date()) + secs(value);\n        }\n    }\n    set exp(value) {\n        if (typeof value === 'number') {\n            this.#payload.exp = validateInput('setExpirationTime', value);\n        }\n        else if (value instanceof Date) {\n            this.#payload.exp = validateInput('setExpirationTime', epoch(value));\n        }\n        else {\n            this.#payload.exp = epoch(new Date()) + secs(value);\n        }\n    }\n    set iat(value) {\n        if (typeof value === 'undefined') {\n            this.#payload.iat = epoch(new Date());\n        }\n        else if (value instanceof Date) {\n            this.#payload.iat = validateInput('setIssuedAt', epoch(value));\n        }\n        else if (typeof value === 'string') {\n            this.#payload.iat = validateInput('setIssuedAt', epoch(new Date()) + secs(value));\n        }\n        else {\n            this.#payload.iat = validateInput('setIssuedAt', value);\n        }\n    }\n}\n","import { compactDecrypt } from '../jwe/compact/decrypt.js';\nimport { validateClaimsSet } from '../lib/jwt_claims_set.js';\nimport { JWTClaimValidationFailed } from '../util/errors.js';\nexport async function jwtDecrypt(jwt, key, options) {\n    const decrypted = await compactDecrypt(jwt, key, options);\n    const payload = validateClaimsSet(decrypted.protectedHeader, decrypted.plaintext, options);\n    const { protectedHeader } = decrypted;\n    if (protectedHeader.iss !== undefined && protectedHeader.iss !== payload.iss) {\n        throw new JWTClaimValidationFailed('replicated \"iss\" claim header parameter mismatch', payload, 'iss', 'mismatch');\n    }\n    if (protectedHeader.sub !== undefined && protectedHeader.sub !== payload.sub) {\n        throw new JWTClaimValidationFailed('replicated \"sub\" claim header parameter mismatch', payload, 'sub', 'mismatch');\n    }\n    if (protectedHeader.aud !== undefined &&\n        JSON.stringify(protectedHeader.aud) !== JSON.stringify(payload.aud)) {\n        throw new JWTClaimValidationFailed('replicated \"aud\" claim header parameter mismatch', payload, 'aud', 'mismatch');\n    }\n    const result = { payload, protectedHeader };\n    if (typeof key === 'function') {\n        return { ...result, key: decrypted.key };\n    }\n    return result;\n}\n","// index.js\n\nimport { jwtDecrypt } from 'jose';\n\n/**\n * buildSSORedirectURL(params)\n * Builds the full Vaave SSO auth redirect URL using query params.\n *\n * @param {Object} params - Must include:\n *   - client_id\n *   - redirect_endpoint\n *   - domain (like https://community.vaave.com)\n *\n * @returns {string} Final redirect URL (string)\n */\nexport function buildSSORedirectURL(params) {\n  const { client_id, redirect_url = null, server_domain } = params;\n\n  if (!client_id) {\n    return { success: false, error: true, message: \"Missing required param: client_id\" };\n  }\n\n  if (!server_domain) {\n    return { success: false, error: true, message: \"Missing required param: server_domain\" };\n  }\n\n  let safeRedirect = redirect_url ? btoa(redirect_url) : '';\n\n  // Now build this URL in the format you wanted:\n  // /sso/auth/client_id/client_domain/encodedRedirectUrl\n  const url = `https://${server_domain}/sso/auth/${client_id}/${safeRedirect}`;\n\n  return { success: true, error: false, message: \"Success\", url };\n}\n\nexport async function decryptSSOToken(token, symmetricKeyBase64) {\n    const alg = 'dir';           // Direct key agreement (no key wrapping)\n    const enc = 'A256GCM';       // AES-GCM with 256-bit key\n  \n    try {\n      // Decode the base64 symmetric key\n      const symmetricKey = Buffer.from(symmetricKeyBase64, 'base64');\n      \n      // Create JWK for symmetric key\n      const jwk = {\n        kty: 'oct',\n        k: symmetricKey.toString('base64url')  // base64url encoded key\n      };\n  \n      const { payload } = await jwtDecrypt(token, jwk, {\n        keyManagementAlgorithms: [alg],\n        contentEncryptionAlgorithms: [enc],\n      });\n      // remove exp(expiry time) from payload\n      delete payload.exp;\n  \n      return {success: true, error: false, message: \"Success\", details: payload};\n    } catch (err) {\n      console.error('Token decryption failed:', err.message);\n      \n      // Check if it's an expiry error\n      if (err.code === 'ERR_JWT_EXPIRED') {\n        return {success: false, error: true, message: \"Token expired. Please login again.\"}\n      }\n      \n      return {success: false, error: true, message: err.message}\n    }\n  }"]}